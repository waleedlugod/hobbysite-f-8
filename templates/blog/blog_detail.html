{% extends 'base.html' %}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Article </title>

    {% block styles %}
    <style>
        .gallery {
            display: grid;
            grid-template-columns: 210px 210px 210px;
            gap: 8px;
            margin: 5px;
            height: auto;
        }
        .gallery-item > img {
            width: 100%;
            height: 100%;
        }
    </style>
    {% endblock %}
</head>


<body>
    {% block content %}
    <div class="divider"> </div>
    <div class="article center">
        <div class="article-header header"> 
            <div>
                <h2 class="category"> {{ article.category }} </h2>
                <h2 class="title"> {{ article.title }} </h2> 
            </div>
            <div>
                <h2 class="author bottom"> {{ article.author }} </h2>
                <h2 class="create-date bottom"> {{ article.created_on }} </h2>
            </div>
        </div>

        <img class="header-img" src="{{ article.header_image.url }}"></img>

        <p> {{ article.entry }} </p>
        <!-- <p> Last updated on: {{ article.updated_on }}</p> -->

        {% if article in request.user.profile.articles.all %}
            <div class="create-link">
                <a href="{{ update_url }}"> Edit this article? </a>
            </div>  
        {% endif %}
      
 
            
        <div class="category" style="font-size: 30px;"> gallery </div>
        <div class="article-line-divider"> </div>
        <div class="gallery">
            {% for imageobj in article.images.all %}
                <div class="gallery-item"> <img src="{{ imageobj.image.url }} "> </div>
            {% endfor %}
        </div>
        <div class="create-link"> <a href="{{ upload_images_url }}"> Upload more images? </a> </div>


        

        <div class="divider"></div>
        <div class="category" style="font-size: 30px;"> comments </div>
        <div class="article-line-divider"> </div>

        <div class="comment-section">
            {% for commentobj in article.comments.all %}
                <p> {{ commentobj.author }}: {{ commentobj.comment }} </p>
            {% endfor %}
            <form method="POST">
                {% csrf_token %}
                {{ comment_form.as_div }}
                <button type="submit"> Submit </button>
            </form>
        </div>

        <div class="divider"></div>
<<<<<<< HEAD
=======
        
>>>>>>> 3665f98e04d6f113b2aeee58774d7133ed438b95
    </div>
    
    {% if request.user.is_authenticated %}
    <div class="article-recommendations">
            <a class="category" style="text-align: left"> Read more from {{ article.author }}: </a>
            <div class="recommendation-grid"> 
            {% for other_article in article.author.articles.all %}
                {% if other_article != article %}
                <p class="recommendation-grid-item"> <a href="{{ other_article.get_absolute_url }}"> {{ other_article }} </a> </p>
                {% endif %}
            {% endfor %}
            </div>
            </ul>
        {% endif %}
    </div>

        <a href="{{ blog_list_url }}"> <button class="back"> Back? </button> </a>
    {% endblock%}


</body>
